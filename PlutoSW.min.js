class PlutoComponent{constructor(e,t){function n(e){return"object"==typeof e}function r(e){return Array.isArray(e)}function i(e){return"function"==typeof e}function o(e,t){function i(i){let s=e[i];const m=h(e,i);m&&!1===m.configurable||u(e,i,{get:()=>l[i]?s:((n(s)||r(s))&&o(s,t),l[i]=!0,s),set:s=>((n(s)||r(s))&&o(s,t),l[i]=!0,a||t(e),s),enumerable:m.enumerable,configurable:!0})}const l={};let a=!1;return(n(e)||r(e))&&m(e).forEach(e=>i(e)),r(e)&&s.forEach(n=>{const r=e[n];u(e,n,{value(...n){const o=e.length;if(a=!0,r.bind(e)(...n),a=!1,e.length>o){const t=new Array(e.length-o).fill(1).map((e,t)=>(t+o).toString());t.forEach(e=>i(e))}t(e)},enumerable:!1,configurable:!0,writable:!0})}),e}const s=["push","pop","unshift","shift","splice","sort","reverse"],{getOwnPropertyNames:l,getOwnPropertySymbols:a,defineProperty:u,getOwnPropertyDescriptor:h}=Object,m=i(a)?function(e){return l(e).concat(a(e))}:l;this.element=null,"object"!=typeof e?(window.PlutoComponents=window.PlutoComponents?window.PlutoComponents:{},window.PlutoComponents[e]=this,this.data=o(t,e=>{var n=this.calcDiff(t,e);this.dataDiff=Object.values(n),this.onDataChange()})):this.data=o(e,e=>{var n=this.calcDiff(t,e);this.dataDiff=Object.values(n),this.onDataChange()}),this.onCreate()}calcDiff(e,t){var n,r,i={};for(n in e)e.hasOwnProperty(n)&&("object"!=typeof e[n]||"object"!=typeof t[n]?n in t&&e[n]===t[n]||void 0!==t[n]&&(i[n]=t[n]):(r=this.calcDiff(e[n],t[n]))&&void 0!==r&&(i[n]=r));for(n in t)!t.hasOwnProperty(n)||n in e||void 0!==t[n]&&(i[n]=t[n]);for(n in i)if(i.hasOwnProperty(n))return i;return!1}onDataChange(){this.element.replace(this._render().element)}onCreate(){}onMount(){}_render(){return this.element=this.render(),this.mounted=!0,this.onMount(),this.element}toString(){return this.render()}}window.PlutoImplements=[],window.PlutoSupportedTags=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"];const Pluto={query:e=>{e="string"==typeof e?document.querySelector(e):e.nodeType&&e.nodeType===Node.ELEMENT_NODE?e:e instanceof Pluto?e.element:null;return new PlutoElement(e)},jsonHighlight:e=>(e=Pluto.jsonPretty(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="color:darkorange;";return/^"/.test(e)?t=/:$/.test(e)?"color:red;":"color:green;":/true|false/.test(e)?t="color:blue;":/null/.test(e)&&(t="color:magenta;"),'<span style="'+t+'">'+e+"</span>"})),jsonPretty:e=>JSON.stringify(e,void 0,4),assign:e=>(window.PlutoSupportedTags.push(e),Pluto[e]=new PlutoElement(e),Pluto[e]),implement:(e,t)=>{PlutoImplements[e]=t}};JSON.highlight=Pluto.jsonHighlight,JSON.pretty=Pluto.jsonPretty,window.PlutoSupportedTags.forEach(e=>{Object.defineProperty(Pluto,e,{get(){if(PlutoImplements[e]){var t=new PlutoElement(e);return t.props(PlutoImplements[e])}return new PlutoElement(e)}})});class PlutoElement{constructor(e){var t;switch(this.components=[],typeof e){case"string":t=window.PlutoSupportedTags.includes(e)?document.createElement(e):document.createRange().createContextualFragment(e).firstChild;break;case"object":e.nodeType&&e.nodeType===Node.ELEMENT_NODE?t=e:e instanceof Pluto&&(t=e.current)}t.PlutoSW={},this.element=t}props(...e){if("string"==typeof e[0])return e[1]?(this.element[e[0]]=e[1],this):this.element[e[0]];e=e[0];for(let t in e)if("object"==typeof e[t])for(let n in e[t])this.element[t][n]=e[t][n];else this.element[t]=e[t];return this}removeAttr(...e){if(e)return this.element.removeAttribute(...e),this}attr(...e){if("string"==typeof e[0])return e[1]?(this.element.setAttribute(e[0],e[1]),this):this.element.getAttribute(e[0]);e=e[0];for(let r in e){var t=e[r];if("object"==typeof t){var n="";for(let e in t)n+=`${e}:${t[e]};`;this.element.setAttribute(r,n)}else this.element.setAttribute(r,t)}return this}class(...e){return e?(this.element.classList.add(...e),this):this.element.classList.toString()}removeClass(...e){if(e)return this.element.classList.remove(...e),this}hasClass(e){return!!e&&this.element.classList.contains(e)}remove(){return this.element.remove(),this}style(...e){if("string"==typeof e[0])return e[1]?(this.element.style[e[0]]=e[1],this):this.element.style[e[0]];e=e[0];for(let t in e)this.element.style[t]=e[t];return this}beforeRender(e){var t=[];return e.forEach(e=>{if(e instanceof PlutoElement)t.push(e);else{var n=new e.component(e.props);this.components.push(n),t.push(n._render())}}),t}child(...e){e=this.beforeRender(e).map(e=>e.element);try{this.element.append(...e)}catch(e){console.error(e)}return this}prepend(...e){e=this.beforeRender(e).map(e=>e.element);try{this.element.prepend(...e)}catch(e){console.error(e)}return this}noClear(){return this.noClearChilds=!0,this}render(...e){return this.noClearChilds||(this.element.innerHTML="",this.noClearChilds=!1),this.child(...e),this}renderTo(e){var t=Pluto.query(e);return this.noClearChilds||(t.element.innerHTML="",this.noClearChilds=!1),t.child(this),this}text(e){return void 0===e?this.element.innerText:(this.element.innerText=e,this)}value(e){return void 0===e?this.element.value:(this.element.value=e,this)}show(){return this.element.style.display="block",this}hide(){return this.element.style.display="none",this}focus(){return this.element.focus(),this}blur(){return this.element.blur(),this}replace(e){return this.element.replaceWith(e),this}id(e){return e?(this.element.id=e,this):this.element.id}html(e){return void 0===e?this.element.innerHTML:(this.element.innerHTML=e,this)}data(...e){if(!e.length)return this.element.PlutoSW;if("string"==typeof e[0])return e[1]?(this.element.PlutoSW[e[0]]=e[1],this):this.element.PlutoSW[e[0]];e=e[0];for(let t in e)if("object"==typeof e[t])for(let n in e[t])this.element.PlutoSW[t]={},this.element.PlutoSW[t][n]=e[t][n];else this.element.PlutoSW[t]=e[t];return this}on(e,t){return t?this.element.addEventListener(e,t.bind(event,this)):this.element[e](),this}toString(){return this.element.outerHTML}}export{Pluto,PlutoComponent};