class PlutoComponent{constructor(e,t){this.element=null,"object"!=typeof e?(window.PlutoComponents=window.PlutoComponents?window.PlutoComponents:{},window.PlutoComponents[e]=this,this.name=e,this.dataDefault=t):this.dataDefault=e,this.onCreate()}calcDiff(e,t){var r,n,s={};for(r in e)e.hasOwnProperty(r)&&("object"!=typeof e[r]||"object"!=typeof t[r]?r in t&&e[r]===t[r]||(s[r]=t[r]):(n=this.calcDiff(e[r],t[r]))&&(s[r]=n));for(r in t)!t.hasOwnProperty(r)||r in e||(s[r]=t[r]);for(r in s)if(s.hasOwnProperty(r))return s;return!1}set data(e){var t;return Array.isArray(this.dataDefault)||Array.isArray(e)?(t=this.calcDiff(this.dataDefault,e),this.dataDefault=e):(t=this.calcDiff(this.dataDefault,e),this.dataDefault=Object.assign(this.dataDefault,e)),this.mounted&&t&&(this.dataDiff=Object.values(t),this.onDataChange()),this}pushData(e){if(Array.isArray(this.dataDefault)){var t=[...this.dataDefault];this.dataDefault.push(e);var r=this.calcDiff(t,this.dataDefault);return this.mounted&&r&&(this.dataDiff=Object.values(r),this.onDataPush()),this}}get data(){return this.dataDefault}onDataPush(){}onDataChange(){this.element.replace(this._render().element)}onCreate(){}onMount(){}_render(){return this.element=this.render(),this.mounted=!0,this.onMount(),this.element}toString(){return this.render()}}window.PlutoImplements=[],window.PlutoSupportedTags=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"];const Pluto={query:e=>{e="string"==typeof e?document.querySelector(e):e.nodeType&&e.nodeType===Node.ELEMENT_NODE?e:e instanceof Pluto?e.element:null;return new PlutoElement(e)},jsonHighlight:e=>(e=Pluto.jsonPretty(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="color:darkorange;";return/^"/.test(e)?t=/:$/.test(e)?"color:red;":"color:green;":/true|false/.test(e)?t="color:blue;":/null/.test(e)&&(t="color:magenta;"),'<span style="'+t+'">'+e+"</span>"})),jsonPretty:e=>JSON.stringify(e,void 0,4),assign:e=>(window.PlutoSupportedTags.push(e),Pluto[e]=new PlutoElement(e),Pluto[e]),implement:(e,t)=>{PlutoImplements[e]=t}};JSON.highlight=Pluto.jsonHighlight,JSON.pretty=Pluto.jsonPretty,window.PlutoSupportedTags.forEach(e=>{Object.defineProperty(Pluto,e,{get(){if(PlutoImplements[e]){var t=new PlutoElement(e);return t.props(PlutoImplements[e])}return new PlutoElement(e)}})});class PlutoElement{constructor(e){var t;switch(this.components=[],typeof e){case"string":t=window.PlutoSupportedTags.includes(e)?document.createElement(e):document.createRange().createContextualFragment(e).firstChild;break;case"object":e.nodeType&&e.nodeType===Node.ELEMENT_NODE?t=e:e instanceof Pluto&&(t=e.current)}t.PlutoSW={},this.element=t}props(...e){if("string"==typeof e[0])return e[1]?(this.element[e[0]]=e[1],this):this.element[e[0]];e=e[0];for(let t in e)if("object"==typeof e[t])for(let r in e[t])this.element[t][r]=e[t][r];else this.element[t]=e[t];return this}removeAttr(...e){if(name)return this.element.removeAttribute(...e),this}attr(...e){if("string"==typeof e[0])return e[1]?(this.element.setAttribute(e[0],e[1]),this):this.element.getAttribute(e[0]);e=e[0];for(let n in e){var t=e[n];if("object"==typeof t){var r="";for(let e in t)r+=`${e}:${t[e]};`;this.element.setAttribute(n,r)}else this.element.setAttribute(n,t)}return this}class(...e){return e?(this.element.classList.add(...e),this):this.element.classList.toString()}removeClass(...e){if(e)return this.element.classList.remove(...e),this}hasClass(e){return!!e&&this.element.classList.contains(e)}remove(){return this.element.remove(),this}style(...e){if("string"==typeof e[0])return e[1]?(this.element.style[e[0]]=e[1],this):this.element.style[e[0]];e=e[0];for(let t in e)this.element.style[t]=e[t];return this}beforeRender(e){var t=[];return e.forEach(e=>{if(e instanceof PlutoElement)t.push(e);else{var r=new e.component(e.props);this.components.push(r),t.push(r._render())}}),t}child(...e){e=this.beforeRender(e).map(e=>e.element);try{this.element.append(...e)}catch(e){console.error(e)}return this}prepend(...e){e=this.beforeRender(e).map(e=>e.element);try{this.element.prepend(...e)}catch(e){console.error(e)}return this}noClear(){return this.noClearChilds=!0,this}render(...e){return this.noClearChilds||(this.element.innerHTML="",this.noClearChilds=!1),this.child(...e),this}renderTo(e){var t=Pluto.query(e);return this.noClearChilds||(t.element.innerHTML="",this.noClearChilds=!1),t.child(this),this}text(e){return e?(this.element.innerText=e,this):this.element.innerText}value(e){return e?(this.element.value=e,this):this.element.value}show(){return this.element.style.display="block",this}hide(){return this.element.style.display="none",this}focus(){return this.element.focus(),this}blur(){return this.element.blur(),this}replace(e){return this.element.replaceWith(e),this}id(e){return e?(this.element.id=e,this):this.element.id}html(e){return e?(this.element.innerHTML=e,this):this.element.innerHTML}data(...e){if(!e.length)return this.element.PlutoSW;if("string"==typeof e[0])return e[1]?(this.element.PlutoSW[e[0]]=e[1],this):this.element.PlutoSW[e[0]];e=e[0];for(let t in e)if("object"==typeof e[t])for(let r in e[t])this.element.PlutoSW[t]={},this.element.PlutoSW[t][r]=e[t][r];else this.element.PlutoSW[t]=e[t];return this}on(e,t){return t?this.element.addEventListener(e,t.bind(event,this)):this.element[e](),this}toString(){return this.element.outerHTML}}export{Pluto,PlutoComponent};