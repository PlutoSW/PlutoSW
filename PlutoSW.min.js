class PlutoComponent{constructor(t,e){this.element=null,"object"!=typeof t?(window.PlutoComponents=window.PlutoComponents?window.PlutoComponents:{},window.PlutoComponents[t]=this,this.name=t,this.dataDefault=e):this.dataDefault=t,this.onCreate()}calcDiff(t,e){var n,r,s={};for(n in t)t.hasOwnProperty(n)&&("object"!=typeof t[n]||"object"!=typeof e[n]?n in e&&t[n]===e[n]||(s[n]=e[n]):(r=this.calcDiff(t[n],e[n]))&&(s[n]=r));for(n in e)!e.hasOwnProperty(n)||n in t||(s[n]=e[n]);for(n in s)if(s.hasOwnProperty(n))return s;return!1}set data(t){var e;return Array.isArray(this.dataDefault)||Array.isArray(t)?(e=this.calcDiff(this.dataDefault,t),this.dataDefault=t):(e=this.calcDiff(this.dataDefault,t),this.dataDefault=Object.assign(this.dataDefault,t)),this.mounted&&e&&(this.dataDiff=Object.values(e),this.onDataChange()),this}pushData(t){if(Array.isArray(this.dataDefault)){var e=[...this.dataDefault];this.dataDefault.push(t);var n=this.calcDiff(e,this.dataDefault);return this.mounted&&n&&(this.dataDiff=Object.values(n),this.onDataPush()),this}}get data(){return this.dataDefault}onDataPush(){}onDataChange(){this.element.replace(this._render().element)}onCreate(){}onMount(){}_render(){return this.element=this.render(),this.mounted=!0,this.onMount(),this.element}toString(){return this.render()}}window.PlutoImplements=[],window.PlutoSupportedTags=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"];const Pluto={query:t=>{t="string"==typeof t?document.querySelector(t):t.nodeType&&t.nodeType===Node.ELEMENT_NODE?t:t instanceof Pluto?t.element:null;return new PlutoElement(t)},jsonHighlight:t=>(t=Pluto.jsonPretty(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="color:darkorange;";return/^"/.test(t)?e=/:$/.test(t)?"color:red;":"color:green;":/true|false/.test(t)?e="color:blue;":/null/.test(t)&&(e="color:magenta;"),'<span style="'+e+'">'+t+"</span>"})),jsonPretty:t=>JSON.stringify(t,void 0,4),assign:t=>(window.PlutoSupportedTags.push(t),Pluto[t]=new PlutoElement(t),Pluto[t]),implement:(t,e)=>{PlutoImplements[t]=e}};JSON.highlight=Pluto.jsonHighlight,JSON.pretty=Pluto.jsonPretty,window.PlutoSupportedTags.forEach(t=>{Object.defineProperty(Pluto,t,{get(){if(PlutoImplements[t]){var e=new PlutoElement(t);return e.props(PlutoImplements[t])}return new PlutoElement(t)}})});class PlutoElement{constructor(t){var e;switch(this.components=[],typeof t){case"string":e=window.PlutoSupportedTags.includes(t)?document.createElement(t):document.createRange().createContextualFragment(t).firstChild;break;case"object":t.nodeType&&t.nodeType===Node.ELEMENT_NODE?e=t:t instanceof Pluto&&(e=t.current)}e.PlutoSW={},this.element=e}props(...t){if("string"==typeof t[0])return t[1]?(this.element[t[0]]=t[1],this):this.element[t[0]];t=t[0];for(let e in t)if("object"==typeof t[e])for(let n in t[e])this.element[e][n]=t[e][n];else this.element[e]=t[e];return this}attr(...t){if("string"==typeof t[0])return t[1]?(this.element.setAttribute(t[0],t[1]),this):this.element.getAttribute(t[0]);t=t[0];for(let r in t){var e=t[r];if("object"==typeof e){var n="";for(let t in e)n+=`${t}:${e[t]};`;this.element.setAttribute(r,n)}else this.element.setAttribute(r,e)}return this}class(...t){return t?(this.element.classList.add(...t),this):this.element.classList.toString()}removeClass(...t){if(t)return this.element.classList.remove(...t),this}hasClass(t){return!!t&&this.element.classList.contains(t)}remove(){return this.element.remove(),this}style(...t){if("string"==typeof t[0])return t[1]?(this.element.style[t[0]]=t[1],this):this.element.style[t[0]];t=t[0];for(let e in t)this.element.style[e]=t[e];return this}beforeRender(t){var e=[];return t.forEach(t=>{if(t instanceof PlutoElement)e.push(t);else{var n=new t.component(t.props);this.components.push(n),e.push(n._render())}}),e}child(...t){t=this.beforeRender(t).map(t=>t.element);try{this.element.append(...t)}catch(t){console.error(t)}return this}noClear(){return this.noClearChilds=!0,this}render(...t){return this.noClearChilds||(this.element.innerHTML="",this.noClearChilds=!1),this.child(...t),this}renderTo(t){var e=Pluto.query(t);return this.noClearChilds||(e.element.innerHTML="",this.noClearChilds=!1),e.child(this),this}text(t){return t?(this.element.innerText=t,this):this.element.innerText}show(){return this.element.style.display="block",this}hide(){return this.element.style.display="none",this}focus(){return this.element.focus(),this}blur(){return this.element.blur(),this}replace(t){return this.element.replaceWith(t),this}id(t){return t?(this.element.id=t,this):this.element.id}html(t){return t?(this.element.innerHTML=t,this):this.element.innerHTML}data(...t){if(!t.length)return this.element.PlutoSW;if("string"==typeof t[0])return t[1]?(this.element.PlutoSW[t[0]]=t[1],this):this.element.PlutoSW[t[0]];t=t[0];for(let e in t)if("object"==typeof t[e])for(let n in t[e])this.element.PlutoSW[e]={},this.element.PlutoSW[e][n]=t[e][n];else this.element.PlutoSW[e]=t[e];return this}on(t,e){return e?this.element.addEventListener(t,e.bind(event,this)):this.element[t](),this}toString(){return this.element.outerHTML}}export{Pluto,PlutoComponent};